<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>JEWSCAN - Jew Scanner</title>
    
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Cinzel:wght@400;700;900&family=Inter:wght@400;600&display=swap" rel="stylesheet">
    
    <!-- Babel -->
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>

    <script>
      tailwind.config = {
        theme: {
          extend: {
            fontFamily: {
              sans: ['Inter', 'sans-serif'],
              display: ['Cinzel', 'serif'],
            },
            colors: {
              gold: {
                400: '#FACC15',
                500: '#EAB308',
                600: '#CA8A04',
              }
            }
          }
        }
      }
    </script>
    
    <style>
      ::-webkit-scrollbar {
        width: 8px;
      }
      ::-webkit-scrollbar-track {
        background: #1f2937;
      }
      ::-webkit-scrollbar-thumb {
        background: #CA8A04;
        border-radius: 4px;
      }
      
      .text-shadow {
        text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.8);
      }
      .text-shadow-lg {
        text-shadow: 4px 4px 8px rgba(0, 0, 0, 0.9);
      }
    </style>

    <!-- Import Map: Pinning dependencies to ensure single React instance -->
    <script type="importmap">
{
  "imports": {
    "react": "https://esm.sh/react@18.2.0",
    "react-dom/client": "https://esm.sh/react-dom@18.2.0/client?deps=react@18.2.0",
    "lucide-react": "https://esm.sh/lucide-react@0.344.0?deps=react@18.2.0",
    "react-dom/": "https://esm.sh/react-dom@^19.2.4/",
    "react/": "https://esm.sh/react@^19.2.4/"
  }
}
</script>
</head>
  <body class="bg-black text-white antialiased overflow-x-hidden">
    <div id="root"></div>

    <script type="text/babel" data-type="module">
      import React, { useState, useEffect } from 'react';
      import { createRoot } from 'react-dom/client';
      import { Copy, Check, Loader2, Search, AlertCircle } from 'lucide-react';

      // --- Constants & Validation ---
      const CONTRACT_ADDRESS = "JEWSCAN88888888888888888888888888888888888";

      const isValidSolanaAddress = (address) => {
        const base58Regex = /^[1-9A-HJ-NP-Za-km-z]{32,44}$/;
        return base58Regex.test(address);
      };

      // --- Components ---

      const Header = () => {
        const [copied, setCopied] = useState(false);

        const handleCopy = () => {
          navigator.clipboard.writeText(CONTRACT_ADDRESS);
          setCopied(true);
          setTimeout(() => setCopied(false), 2000);
        };

        return (
          <nav className="fixed top-0 left-0 w-full z-50 px-6 py-4 flex items-center justify-between bg-gradient-to-b from-black/80 to-transparent">
            {/* Left Logo */}
            <div className="w-auto md:w-32 flex justify-start">
              <div className="text-2xl md:text-3xl font-display font-black text-white tracking-widest text-shadow-lg border-b-2 border-gold-500 pb-1">
                JEWSCAN
              </div>
            </div>

            {/* Center Button */}
            <div className="flex-1 flex justify-center md:flex-none">
              <button
                onClick={handleCopy}
                className="group relative flex items-center gap-2 px-6 py-2 bg-black/60 backdrop-blur-md border border-gold-500/50 rounded-full text-gold-400 font-bold tracking-wider hover:bg-gold-500 hover:text-black transition-all duration-300 shadow-[0_0_15px_rgba(234,179,8,0.3)] hover:shadow-[0_0_25px_rgba(234,179,8,0.6)]"
              >
                <span className="text-sm md:text-base">CA: updating</span>
                {copied ? <Check size={16} /> : <Copy size={16} />}
                
                <span className={`absolute -bottom-8 left-1/2 -translate-x-1/2 text-xs text-white bg-black/80 px-2 py-1 rounded transition-opacity duration-200 ${copied ? 'opacity-100' : 'opacity-0'}`}>
                  Copied!
                </span>
              </button>
            </div>

            <div className="hidden md:block w-32"></div>
          </nav>
        );
      };

      const ScanSection = () => {
        const [walletAddress, setWalletAddress] = useState('');
        const [isLoading, setIsLoading] = useState(false);
        const [result, setResult] = useState(null);
        const [error, setError] = useState(null);

        const possibleResults = [
          'Not a JEW',
          'Defo NOT a JEW',
          'JEW',
          'Defo a JEW'
        ];

        const handleSubmit = (e) => {
          e.preventDefault();
          setError(null);
          setResult(null);

          if (!walletAddress.trim()) {
            setError('Please enter a wallet address');
            return;
          }

          if (!isValidSolanaAddress(walletAddress)) {
            setError('Invalid Solana wallet address');
            return;
          }

          setIsLoading(true);

          setTimeout(() => {
            const randomIndex = Math.floor(Math.random() * possibleResults.length);
            setResult(possibleResults[randomIndex]);
            setIsLoading(false);
          }, 2000);
        };

        const getResultColor = (res) => {
          switch (res) {
            case 'JEW':
            case 'Defo a JEW':
              return 'text-gold-400 drop-shadow-[0_0_15px_rgba(250,204,21,0.8)]';
            case 'Not a JEW':
            case 'Defo NOT a JEW':
              return 'text-red-500 drop-shadow-[0_0_15px_rgba(239,68,68,0.8)]';
            default:
              return 'text-white';
          }
        };

        return (
          <div className="w-full max-w-2xl mx-auto px-4 pb-12 flex flex-col items-center justify-end min-h-[60vh] gap-6">
            
            <div className="h-32 flex items-end justify-center w-full mb-4">
              {isLoading ? (
                <div className="flex flex-col items-center gap-2 animate-pulse">
                  <Loader2 className="w-12 h-12 text-gold-500 animate-spin" />
                  <span className="text-gold-300 font-display text-xl">Scanning Ledger...</span>
                </div>
              ) : result ? (
                <h1 className={`text-4xl md:text-6xl lg:text-7xl font-display font-black text-center transition-all duration-500 transform scale-100 ${getResultColor(result)} text-shadow-lg`}>
                  {result}
                </h1>
              ) : null}
            </div>

            <p className="text-gold-400 font-display text-lg md:text-xl text-center text-shadow">
              paste a solana wallet address to find out if a jew owns it
            </p>

            <form onSubmit={handleSubmit} className="w-full relative group">
              <div className="absolute -inset-1 bg-gradient-to-r from-gold-600 to-yellow-300 rounded-xl blur opacity-25 group-hover:opacity-50 transition duration-1000 group-hover:duration-200"></div>
              
              <div className="relative flex flex-col md:flex-row gap-2 bg-black/80 backdrop-blur-xl p-2 rounded-xl border border-white/10">
                <div className="flex-1 relative">
                  <input
                    type="text"
                    value={walletAddress}
                    onChange={(e) => {
                      setWalletAddress(e.target.value);
                      setError(null);
                    }}
                    placeholder="Enter Solana Wallet Address"
                    className="w-full bg-transparent text-white placeholder-white/30 px-4 py-3 md:py-4 outline-none font-mono text-sm md:text-base"
                  />
                  {error && (
                    <div className="absolute -top-10 left-0 text-red-400 text-sm flex items-center gap-1 bg-black/90 px-3 py-1 rounded-md border border-red-500/50">
                      <AlertCircle size={14} />
                      {error}
                    </div>
                  )}
                </div>
                
                <button
                  type="submit"
                  disabled={isLoading}
                  className="bg-gold-500 hover:bg-gold-400 text-black font-bold uppercase tracking-wider px-8 py-3 md:py-4 rounded-lg transition-colors flex items-center justify-center gap-2 disabled:opacity-50 disabled:cursor-not-allowed min-w-[140px]"
                >
                  {isLoading ? '...' : (
                    <>
                      <span>Scan</span>
                      <Search size={18} className="stroke-[3]" />
                    </>
                  )}
                </button>
              </div>
            </form>

            <p className="text-white/30 text-xs md:text-sm text-center max-w-md">
              By pasting wallet, you agree that this is a satire application.
              <br/>Only Solana network supported.
            </p>
          </div>
        );
      };

      const App = () => {
        return (
          <div className="relative w-full h-screen overflow-hidden bg-black">
            <div 
              className="absolute inset-0 w-full h-full bg-cover bg-center bg-no-repeat z-0 transition-transform duration-[20s] hover:scale-105"
              style={{
                backgroundImage: "url('https://i.postimg.cc/jdgxRKFv/freepik-create-a-older-jewish-character-looking-at-viewer-20787.jpg')",
                backgroundPosition: "center 20%" 
              }}
            >
              <div className="absolute inset-0 bg-gradient-to-t from-black via-black/40 to-black/60 opacity-90"></div>
              <div className="absolute inset-0 bg-black/20 backdrop-brightness-75"></div>
            </div>

            <div className="relative z-10 w-full h-full flex flex-col justify-between">
              <Header />
              
              <main className="flex-1 flex flex-col justify-end pb-10 md:pb-20">
                <ScanSection />
              </main>
            </div>
          </div>
        );
      };

      const rootElement = document.getElementById('root');
      if (!rootElement) throw new Error("Root element not found");
      
      const root = createRoot(rootElement);
      root.render(
        <React.StrictMode>
          <App />
        </React.StrictMode>
      );
    </script>
  <script type="module" src="/index.tsx"></script>
</body>
</html>